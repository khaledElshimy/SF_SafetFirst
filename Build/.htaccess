# This file ensures that Unity WebGL builds work correctly on Apache servers (Hostinger)
# It handles the Content-Encoding for gzip files so the browser knows how to decompress them.

<IfModule mod_mime.c>
  # The following lines enable the correct MIME type for the compressed files
  AddEncoding gzip .gz
  
  # Ensure the browser knows these are compressed files, NOT just files ending in .gz
  AddType application/javascript .js.gz
  AddType application/wasm .wasm.gz
  AddType application/octet-stream .data.gz
  AddType application/octet-stream .symbols.json.gz
</IfModule>

# Ensure that if a file doesn't exist, we don't fall back disastrously
<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # If the client accepts gzip and the file exists, serve the .gz version
  # This part is optional if you are linking directly to .gz files or if Unity loader handles it.
  # Unity 2020+ loader usually requests the specific files it needs.
</IfModule>

<IfModule mod_headers.c>
    # Fix for Unity WebGL content encoding
    <FilesMatch "\.js\.gz$">
      Header set Content-Encoding gzip
      Header set Content-Type application/javascript
    </FilesMatch>
    <FilesMatch "\.wasm\.gz$">
      Header set Content-Encoding gzip
      Header set Content-Type application/wasm
    </FilesMatch>
    <FilesMatch "\.data\.gz$">
      Header set Content-Encoding gzip
      Header set Content-Type application/octet-stream
    </FilesMatch>
    <FilesMatch "\.symbols\.json\.gz$">
      Header set Content-Encoding gzip
      Header set Content-Type application/octet-stream
    </FilesMatch>
</IfModule>
